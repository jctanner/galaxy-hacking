#!/usr/bin/env python3


import os
import time
import datetime
import subprocess


def clone_repo(repo, dst):
    cmd = f'git clone {repo} {dst}'
    subprocess.run(cmd, shell=True)


def main():

    srcdir = '/src'
    if not os.path.exists(srcdir):
        os.makedirs(srcdir)

    src = os.path.join(srcdir, 'galaxy_ng')
    clone_repo('https://github.com/ansible/galaxy_ng', src)

    subprocess.run(f'pip install -e {src}', shell=True)

    while True:
        ts = datetime.datetime.now().isoformat()
        print(ts)
        time.sleep(2)


if __name__ == "__main__":
    main()
